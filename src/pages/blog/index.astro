---
/**
 * * This page is the blog index and displays all the articles in a grid
 **/

// Utils
import { getCollection } from "astro:content";
import { getImage } from "astro:assets";
import "@styles/sidebar.less";

// Components
import BaseLayout from "@layouts/BaseLayout.astro";
import BlogRecentArticlesWithSidebar from "@layouts/BlogRecentArticlesWithSidebar.astro";
import PageHero from "@components/PageHero/PageHero.astro";

// Images
import placeholderImage from "@assets/images/placeholder.jpg";
const placeholderOptimizedImage = await getImage({
  src: placeholderImage,
  format: "webp",
});

const posts = await getCollection("blog");
posts.sort(
  (a, b) => new Date(b.data.date).valueOf() - new Date(a.data.date).valueOf(),
);
---

<BaseLayout
  title="Marketing Blog & Insights"
  description="Read marketing insights, SEO tips, web design guidance, and growth strategies from Indigo Business Solutions."
  heroImage={placeholderOptimizedImage}
>
  <PageHero
    title="Marketing Blog & Insights"
    description="Read marketing insights, SEO tips, web design guidance, and growth strategies from Indigo Business Solutions."
    breadcrumbs={[{ label: "Home Page", href: "/" }, { label: "Blog" }]}
  />

  <!-- Use the BlogRecentArticles layout to display the recent articles in a standard grid -->
  <!-- <BlogRecentArticles posts={posts} /> -->

  <!-- Use the BlogRecentArticlesWithSidebar layout to display the recent articles in a custom sidebar layout-->
  <BlogRecentArticlesWithSidebar posts={posts} postUrlPrefix="/" />
</BaseLayout>

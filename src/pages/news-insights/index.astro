---
import { getCollection } from "astro:content";
import { getImage } from "astro:assets";
import "@styles/sidebar.less";

import BaseLayout from "@layouts/BaseLayout.astro";
import BlogRecentArticlesWithSidebar from "@layouts/BlogRecentArticlesWithSidebar.astro";

import placeholderImage from "@assets/images/placeholder.jpg";

const placeholderOptimizedImage = await getImage({ src: placeholderImage, format: "webp" });

const posts = await getCollection("blog");
posts.sort((a, b) => new Date(b.data.date).valueOf() - new Date(a.data.date).valueOf());
---

<BaseLayout title="News & Insights" description="Latest news and insights from Indigo USA." heroImage={placeholderOptimizedImage}>
	<BlogRecentArticlesWithSidebar posts={posts} postUrlPrefix="/" />
</BaseLayout>
